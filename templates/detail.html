{% extends "layout.html" %}
{% block content %}

<div class="row">
    <div class="col-md-4">
        <img src="{{ anime.image }}" class="img-fluid rounded shadow">
    </div>

    <div class="col-md-8">
        <h2>{{ anime.title }}</h2>
        <p><b>Thá»ƒ loáº¡i:</b> {{ anime.genres }}</p>
        <p><b>Háº¡ng:</b> {{ anime.popularity }}</p>
        <p><b>Äiá»ƒm:</b> {{ anime.score }}</p>
        <p><b>Sá»‘ táº­p:</b> {{ anime.episodes }}</p>
        <p><b>Tráº¡ng thÃ¡i:</b> {{ anime.status }}</p>
        <p><b>LÆ°á»£t yÃªu thÃ­ch:</b> {{ anime.favorites }}</p>
        {% if session.username %}
            {% if is_favorite %}
                <a href="/favorite/{{ anime.id }}" class="btn btn-warning">ğŸ’› ÄÃ£ yÃªu thÃ­ch</a>
            {% else %}
                <a href="/favorite/{{ anime.id }}" class="btn btn-outline-warning">ğŸ’› ThÃªm yÃªu thÃ­ch</a>
            {% endif %}
        {% endif %}

        <h4>ÄÃ¡nh giÃ¡ anime</h4>

        {% if user_rating %}
            <p>Báº¡n Ä‘Ã£ Ä‘Ã¡nh giÃ¡: <b>{{ user_rating }}/10</b></p>
            <a href="/rate/delete/{{ anime.id }}" class="btn btn-danger btn-sm mb-2">XÃ³a Ä‘Ã¡nh giÃ¡</a>
        {% else %}
            <p>Báº¡n chÆ°a Ä‘Ã¡nh giÃ¡ anime nÃ y.</p>
        {% endif %}

        <div class="rating-buttons">
            {% for i in range(1, 11) %}
                <a href="/rate/{{ anime.id }}/{{ i }}"
                class="rate-btn {% if user_rating == i %}active-rate{% endif %}">
                    {{ i }}
                </a>
            {% endfor %}
        </div>

    </div>
</div>

<hr>

<p><b>MÃ´ táº£:</b> {{ anime.synopsis_clean }}</p>

<hr>

<h3>Gá»£i Ã½ anime tÆ°Æ¡ng tá»±</h3>

<div class="row g-4 mt-2">
    {% for a in recommendations %}
    <div class="col-6 col-md-3 col-lg-2">
        <div class="card anime-card">
            <img src="{{ a.image }}" class="card-img-top">
            <div class="card-body text-center">
                <a href="/anime/{{ a.id }}" class="anime-title-link">{{ a.title }}</a>
                <p class="text-muted small">{{ a.genres }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
